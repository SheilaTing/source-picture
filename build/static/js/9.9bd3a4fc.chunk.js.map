{"version":3,"sources":["components/List.js","pages/History.js"],"names":["Img","styled","img","Component","observer","historyStore","useStores","useEffect","console","log","reset","initialLoad","pageStart","loadMore","find","hasMore","isLoadding","useWindow","dataSource","list","renderItem","item","Item","key","id","src","attributes","file","url","filename","target","href","className","tip","History","List"],"mappings":"+VAQA,IAAMA,EAAMC,IAAOC,IAAV,KA8DMC,EAvDGC,aAAS,WAAO,IACtBC,EAAiBC,cAAjBD,aAiBR,OARAE,qBAAU,WAEN,OADAC,QAAQC,IAAI,4BACN,WACFD,QAAQC,IAAI,gBACZJ,EAAaK,WAEnB,IAGE,6BACI,kBAAC,IAAD,CACIC,aAAa,EACbC,UAAW,EACXC,SAnBK,WACbR,EAAaS,QAmBLC,SAAUV,EAAaW,YAAcX,EAAaU,QAClDE,WAAW,GAEX,kBAAC,IAAD,CACIC,WAAYb,EAAac,KACzBC,WAAY,SAAAC,GAAI,OACZ,kBAAC,IAAKC,KAAN,CAAWC,IAAKF,EAAKG,IACjB,6BACI,kBAACxB,EAAD,CAAKyB,IAAOJ,EAAKK,WAAWC,KAAKD,WAAWE,OAEhD,6BACC,4BAAKP,EAAKK,WAAWG,WAEtB,6BACR,uBAAGC,OAAO,SAASC,KAAMV,EAAKK,WAAWC,KAAKD,WAAWE,KAAMP,EAAKK,WAAWC,KAAKD,WAAWE,SAM9FvB,EAAaW,YAAcX,EAAaU,SACrC,yBAAKiB,UAAU,0BACX,kBAAC,IAAD,CAAMC,IAAI,8BClDvBC,UATf,WACI,OACI,oCACI,uCACA,kBAACC,EAAD","file":"static/js/9.9bd3a4fc.chunk.js","sourcesContent":["import React,{useEffect} from 'react';\nimport { observer } from 'mobx-react';\nimport { useStores } from '../stores';\nimport styled from 'styled-components';\nimport { List, Spin } from 'antd';\nimport InfiniteScroll from 'react-infinite-scroller';\n\n// 设置图片大小\nconst Img = styled.img`\n    width:100px;\n    height:120px;\n    object-fit :contain;\n    border:1px solid #eee;\n`;\n\nconst Component = observer(() => {\n    const { historyStore } = useStores();\n\n    //加载更多方法\n    const loadMore = ()=>{\n        historyStore.find();\n    };\n\n    // 使用 useEffect 在组件挂载时重新加载，卸载时把数据清空\n\n    useEffect(()=>{\n        console.log('进入组件');\n        return()=>{\n            console.log('卸载');\n            historyStore.reset();\n        }\n    },[]);  // 第二个参数为空数组,不监控任何state值，只执行一次\n\n    return (\n        <div>\n            <InfiniteScroll\n                initialLoad={true}\n                pageStart={1}\n                loadMore={loadMore}\n                hasMore={!historyStore.isLoadding && historyStore.hasMore}\n                useWindow={true}\n            >\n                <List\n                    dataSource={historyStore.list}\n                    renderItem={item => (\n                        <List.Item key={item.id}>\n                            <div>\n                                <Img src = {item.attributes.file.attributes.url}/>\n                            </div>\n                            <div>\n                             <h5>{item.attributes.filename}</h5>\n                            </div>\n                            <div>\n                    <a target=\"_blank\" href={item.attributes.file.attributes.url}>{item.attributes.file.attributes.url}</a>\n                            </div>\n                          \n                        </List.Item>\n                    )}\n                >\n                    {historyStore.isLoadding && historyStore.hasMore && (\n                        <div className=\"demo-loading-container\">\n                            <Spin tip=\"加载中\"/>\n                        </div>\n                    )}\n                </List>\n            </InfiniteScroll>\n        </div>\n    )\n})\n\nexport default Component;","import React from 'react';\nimport List from '../components/List';\nfunction History(){\n    return(\n        <>\n            <h1>History</h1>\n            <List></List>\n        </>\n    )\n}\n\nexport default History;"],"sourceRoot":""}